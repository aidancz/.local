#!/bin/sh

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ xresources
if [ "$1" == 1 ]
then
	sed '/! light/,/! light/s/! \(.\+\)/\1/' "$XDG_CONFIG_HOME/.x11/xresources" | xrdb 2> /dev/null
else
	sed '/! dark/,/! dark/s/! \(.\+\)/\1/' "$XDG_CONFIG_HOME/.x11/xresources" | xrdb 2> /dev/null
fi

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ emacs dl.el
if [ "$1" == 1 ]
then
	echo "(load-theme 'sanityinc-solarized-light t)" > "$XDG_CONFIG_HOME/emacs/lisp/dl.el"
else
	echo "(load-theme 'sanityinc-solarized-dark t)" > "$XDG_CONFIG_HOME/emacs/lisp/dl.el"
fi

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ renew dwm
# steal code from sysact
export WM="dwm"

wmpid(){
	tree="$(pstree -ps $$)"
	tree="${tree#*$WM(}"
	echo "${tree%%)*}"
}

kill -HUP "$(wmpid)"
